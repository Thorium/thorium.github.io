<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" />
    <!-- 
      The Domain-modelling, DSL-language
 parameters will be replaced with the 
      document title extracted from the <h1> element or
      file name, if there is no <h1> heading
    -->
    <title>Domain-modelling, DSL-language
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="http://code.jquery.com/jquery-2.1.0.min.js"></script>
    <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.min.js"></script>
    <script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="../content/style.css" />
	<meta name="robots" content="index,follow" />
	<meta name="rating" content="general" />
	<meta name="generator" content="FSharp.Formatting.2.4.2 by Tomas Petricek" />
	<meta name="Author" content="Tuomas Hietanen, 2014" />
    <script src="../content/tips.js" type="text/javascript"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
	<style type="text/css" id="custom-background-css">
		body { background-color: #E9E9E9; background-image: url('../content/FStAUS.png'); background-repeat: repeat; background-position: top left; background-attachment: fixed; }
		.container { background-color: #FFFFFF; border: solid 1px #000000; }
	</style>
  </head>
  <body class="bg">
	<div style="margin: 5px; text-align: center; color:gray;">
		<a href="http://www.meetup.com/FSharpHelsinki/" target="_blank"><span style="margin: 5px; text-align: center; color:gray;">The Greater Helsinki Area F# User Group</span></a>
		<span style="margin: 5px; text-align: center; color:gray;"> - F# & Azure - </span>
		<a href="http://thorium.github.io/FSharpAzure/Readme.html"><span style="margin: 5px; text-align: center; color:gray;">FI</span></a>	
		<a href="http://thorium.github.io/FSharpAzure/ReadmeEng.html"><span style="margin: 5px; text-align: center; color:gray;">EN</span></a>	
    </div>
	<div class="container">
      <div class="row" style="margin-top:30px">
        <div class="span1"></div>
        <div class="span10" id="main">
          <h1>Domain-modelling, DSL-language</h1>

<p>Domain-model means data model (=structure) for developers, to guide problem solving to some direction.</p>

<p>Domain Specific Language (DSL) refers in this practices context only to Embedded / Internal style language, where independent functional (combinator-)library will be integrated to part of F#-language. We won't go through Fowler's OO-based DSL-book.</p>

<h2>The Phases of Modelling</h2>

<p>Modelling can be divided to three phases</p>

<ol>
<li><strong>Selection/modelling of the primitives</strong>
<ul>
<li>The basic items of the system.</li>
<li>Only the most essential information</li>
</ul></li>
<li><strong>Modelling the composition</strong>
<ul>
<li>How to combine primitives so that they fit seamlessly together</li>
<li>Combinators</li>
</ul></li>
<li><strong>Syntax</strong>
<ul>
<li>Decorations, so that pieces are nice to use.</li>
</ul></li>
</ol>

<h2>1. &amp; 2. Modelling the Primitives and the Composition</h2>

<p>Functionalities (/contract) can be modelled as data or as computation. Regardless of this, the same tooling is in use.</p>

<h3>The Tooling of Modelling</h3>

<p>Modelling should be done using three available tools:</p>

<ul>
<li><strong>Tuples</strong>
<ul>
<li>"Product type", can be thought as AND-operation</li>
</ul></li>
<li><strong>Discriminated unions</strong>
<ul>
<li>"Sum type", can be thought as OR-operation</li>
</ul></li>
<li><strong>Functions</strong>
<ul>
<li>Transition between the states</li>
<li>Modelling of an operation</li>
</ul></li>
</ul>

<p>In theory this Boolean-algebra is enough to model everything in information technology. The cleanest domain is achieved using these (i.e. avoid object-oriented-structures), but in practice you sometimes want to use also these:</p>

<ul>
<li><strong>Record</strong>, if there is a lot of bundled data (e.g. "ERP-object")</li>
<li><strong>List</strong>, if you don't want to list each single item</li>
<li>Discriminated union can sometimes <em>afterwards</em> be replaced with an interface, if all the members are not known, i.e. some kind of plug-in -architecture is wanted.</li>
</ul>

<h3>Domain-model Modelling (Contract as Data)</h3>

<p>Let's take an example, simple stocks exchange trading.</p>

<p>How would you model the trades?</p>

<ul>
<li>I want to buy 100 Microsoft stocks.</li>
<li>I want to buy 500 Nokia stocks.</li>
<li>I want to sell 300 Google stocks.</li>
</ul>

<p>Primitives would be the single trades. Composition is combining those to some kind of abstract syntax tree.</p>

<p>Usually the best practice is to model functionality (commands, verbs) rather than basic-objects (nouns). The model could look for example like this:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">module</span> <span class="i">``OptionTrade case 1``</span> <span class="o">=</span>

    <span class="c">//Primitives:</span>
    <span class="k">type</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="i">OptionTrade</span> <span class="o">=</span> 
    | <span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="i">Buy</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs3', 3)" onmouseover="showTip(event, 'fs3', 3)" class="i">string</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs4', 4)" onmouseover="showTip(event, 'fs4', 4)" class="i">decimal</span> <span class="c">// Buy &quot;MSFT&quot; 100 (amount)</span>
    | <span onmouseout="hideTip(event, 'fs5', 5)" onmouseover="showTip(event, 'fs5', 5)" class="i">Sell</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs3', 6)" onmouseover="showTip(event, 'fs3', 6)" class="i">string</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs4', 7)" onmouseover="showTip(event, 'fs4', 7)" class="i">decimal</span>
    <span class="c">//Composition combinators:</span>
    | <span onmouseout="hideTip(event, 'fs6', 8)" onmouseover="showTip(event, 'fs6', 8)" class="i">ContractUntil</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs7', 9)" onmouseover="showTip(event, 'fs7', 9)" class="i">System</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs8', 10)" onmouseover="showTip(event, 'fs8', 10)" class="i">DateTime</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs1', 11)" onmouseover="showTip(event, 'fs1', 11)" class="i">OptionTrade</span>
    | <span onmouseout="hideTip(event, 'fs9', 12)" onmouseover="showTip(event, 'fs9', 12)" class="i">ContractAfter</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs7', 13)" onmouseover="showTip(event, 'fs7', 13)" class="i">System</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs8', 14)" onmouseover="showTip(event, 'fs8', 14)" class="i">DateTime</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs1', 15)" onmouseover="showTip(event, 'fs1', 15)" class="i">OptionTrade</span>
    | <span onmouseout="hideTip(event, 'fs10', 16)" onmouseover="showTip(event, 'fs10', 16)" class="i">Combine</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs1', 17)" onmouseover="showTip(event, 'fs1', 17)" class="i">OptionTrade</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs1', 18)" onmouseover="showTip(event, 'fs1', 18)" class="i">OptionTrade</span> <span class="c">//or OptionTrade list</span></pre>
</td>
</tr>
</table>

<p>Or like this:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">module</span> <span class="i">``OptionTrade case 2``</span> <span class="o">=</span>

    <span class="c">//Primitives:</span>
    <span class="k">type</span> <span onmouseout="hideTip(event, 'fs11', 19)" onmouseover="showTip(event, 'fs11', 19)" class="i">OperationKind</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs12', 20)" onmouseover="showTip(event, 'fs12', 20)" class="i">Buy</span> | <span onmouseout="hideTip(event, 'fs13', 21)" onmouseover="showTip(event, 'fs13', 21)" class="i">Sell</span>
    <span class="k">type</span> <span onmouseout="hideTip(event, 'fs14', 22)" onmouseover="showTip(event, 'fs14', 22)" class="i">DateTimeKind</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs15', 23)" onmouseover="showTip(event, 'fs15', 23)" class="i">Until</span> | <span onmouseout="hideTip(event, 'fs16', 24)" onmouseover="showTip(event, 'fs16', 24)" class="i">After</span>
    <span class="k">type</span> <span onmouseout="hideTip(event, 'fs17', 25)" onmouseover="showTip(event, 'fs17', 25)" class="i">OptionTrade</span> <span class="o">=</span> 
    | <span onmouseout="hideTip(event, 'fs18', 26)" onmouseover="showTip(event, 'fs18', 26)" class="i">Operation</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs11', 27)" onmouseover="showTip(event, 'fs11', 27)" class="i">OperationKind</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs3', 28)" onmouseover="showTip(event, 'fs3', 28)" class="i">string</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs4', 29)" onmouseover="showTip(event, 'fs4', 29)" class="i">decimal</span>
    <span class="c">//Composition combinators:</span>
    | <span onmouseout="hideTip(event, 'fs19', 30)" onmouseover="showTip(event, 'fs19', 30)" class="i">Contract</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs14', 31)" onmouseover="showTip(event, 'fs14', 31)" class="i">DateTimeKind</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs7', 32)" onmouseover="showTip(event, 'fs7', 32)" class="i">System</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs8', 33)" onmouseover="showTip(event, 'fs8', 33)" class="i">DateTime</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs17', 34)" onmouseover="showTip(event, 'fs17', 34)" class="i">OptionTrade</span>
    | <span onmouseout="hideTip(event, 'fs10', 35)" onmouseover="showTip(event, 'fs10', 35)" class="i">Combine</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs17', 36)" onmouseover="showTip(event, 'fs17', 36)" class="i">OptionTrade</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs17', 37)" onmouseover="showTip(event, 'fs17', 37)" class="i">OptionTrade</span></pre>
</td>
</tr>
</table>

<p>The main difference between these two is that when these are later used, how easy is it to access the parameter data:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
<span class="l">25: </span>
<span class="l">26: </span>
<span class="l">27: </span>
<span class="l">28: </span>
<span class="l">29: </span>
<span class="l">30: </span>
<span class="l">31: </span>
<span class="l">32: </span>
<span class="l">33: </span>
<span class="l">34: </span>
<span class="l">35: </span>
<span class="l">36: </span>
<span class="l">37: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">module</span> <span class="i">``OptionTrade case 1 usage``</span> <span class="o">=</span>
    <span class="k">open</span> <span class="i">``OptionTrade case 1``</span>

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs20', 38)" onmouseover="showTip(event, 'fs20', 38)" class="i">create</span> <span class="o">=</span> 
        <span onmouseout="hideTip(event, 'fs10', 39)" onmouseover="showTip(event, 'fs10', 39)" class="i">Combine</span>(
            <span onmouseout="hideTip(event, 'fs10', 40)" onmouseover="showTip(event, 'fs10', 40)" class="i">Combine</span>(
                <span onmouseout="hideTip(event, 'fs2', 41)" onmouseover="showTip(event, 'fs2', 41)" class="i">Buy</span>(<span class="s">&quot;</span><span class="s">MSFT</span><span class="s">&quot;</span>,<span class="n">100m</span>),
                <span onmouseout="hideTip(event, 'fs2', 42)" onmouseover="showTip(event, 'fs2', 42)" class="i">Buy</span>(<span class="s">&quot;</span><span class="s">NOK</span><span class="s">&quot;</span>,<span class="n">500m</span>)),
            <span onmouseout="hideTip(event, 'fs5', 43)" onmouseover="showTip(event, 'fs5', 43)" class="i">Sell</span>(<span class="s">&quot;</span><span class="s">GOOG</span><span class="s">&quot;</span>,<span class="n">300m</span>))

    <span class="k">let</span> <span class="k">rec</span> <span onmouseout="hideTip(event, 'fs21', 44)" onmouseover="showTip(event, 'fs21', 44)" class="i">purge</span> <span class="o">=</span> 
        <span class="k">function</span>
            | <span onmouseout="hideTip(event, 'fs2', 45)" onmouseover="showTip(event, 'fs2', 45)" class="i">Buy</span> (<span onmouseout="hideTip(event, 'fs22', 46)" onmouseover="showTip(event, 'fs22', 46)" class="i">name</span>,<span onmouseout="hideTip(event, 'fs23', 47)" onmouseover="showTip(event, 'fs23', 47)" class="i">amount</span>) <span class="k">-&gt;</span> <span class="s">&quot;</span><span class="s">&quot;</span> <span class="c">//...</span>
            | <span onmouseout="hideTip(event, 'fs5', 48)" onmouseover="showTip(event, 'fs5', 48)" class="i">Sell</span> (<span onmouseout="hideTip(event, 'fs22', 49)" onmouseover="showTip(event, 'fs22', 49)" class="i">name</span>,<span onmouseout="hideTip(event, 'fs23', 50)" onmouseover="showTip(event, 'fs23', 50)" class="i">amount</span>) <span class="k">-&gt;</span> <span class="s">&quot;</span><span class="s">&quot;</span> <span class="c">//...</span>
            | <span onmouseout="hideTip(event, 'fs6', 51)" onmouseover="showTip(event, 'fs6', 51)" class="i">ContractUntil</span> (<span onmouseout="hideTip(event, 'fs24', 52)" onmouseover="showTip(event, 'fs24', 52)" class="i">dt</span>,<span onmouseout="hideTip(event, 'fs25', 53)" onmouseover="showTip(event, 'fs25', 53)" class="i">opt</span>) <span class="k">-&gt;</span> 
                 <span class="k">if</span> <span onmouseout="hideTip(event, 'fs24', 54)" onmouseover="showTip(event, 'fs24', 54)" class="i">dt</span><span class="o">&lt;=</span><span onmouseout="hideTip(event, 'fs7', 55)" onmouseover="showTip(event, 'fs7', 55)" class="i">System</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs8', 56)" onmouseover="showTip(event, 'fs8', 56)" class="i">DateTime</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs26', 57)" onmouseover="showTip(event, 'fs26', 57)" class="i">Now</span> <span class="k">then</span> <span onmouseout="hideTip(event, 'fs21', 58)" onmouseover="showTip(event, 'fs21', 58)" class="i">purge</span> <span onmouseout="hideTip(event, 'fs25', 59)" onmouseover="showTip(event, 'fs25', 59)" class="i">opt</span> <span class="k">else</span> <span class="s">&quot;</span><span class="s">&quot;</span> <span class="c">//...</span>
            | <span onmouseout="hideTip(event, 'fs9', 60)" onmouseover="showTip(event, 'fs9', 60)" class="i">ContractAfter</span> (<span onmouseout="hideTip(event, 'fs24', 61)" onmouseover="showTip(event, 'fs24', 61)" class="i">dt</span>,<span onmouseout="hideTip(event, 'fs25', 62)" onmouseover="showTip(event, 'fs25', 62)" class="i">opt</span>) <span class="k">-&gt;</span>
                 <span class="k">if</span> <span onmouseout="hideTip(event, 'fs24', 63)" onmouseover="showTip(event, 'fs24', 63)" class="i">dt</span><span class="o">&gt;</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs7', 64)" onmouseover="showTip(event, 'fs7', 64)" class="i">System</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs8', 65)" onmouseover="showTip(event, 'fs8', 65)" class="i">DateTime</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs26', 66)" onmouseover="showTip(event, 'fs26', 66)" class="i">Now</span> <span class="k">then</span> <span onmouseout="hideTip(event, 'fs21', 67)" onmouseover="showTip(event, 'fs21', 67)" class="i">purge</span> <span onmouseout="hideTip(event, 'fs25', 68)" onmouseover="showTip(event, 'fs25', 68)" class="i">opt</span> <span class="k">else</span> <span class="s">&quot;</span><span class="s">&quot;</span> <span class="c">//...</span>
            | <span onmouseout="hideTip(event, 'fs10', 69)" onmouseover="showTip(event, 'fs10', 69)" class="i">Combine</span> (<span onmouseout="hideTip(event, 'fs27', 70)" onmouseover="showTip(event, 'fs27', 70)" class="i">a</span>,<span onmouseout="hideTip(event, 'fs28', 71)" onmouseover="showTip(event, 'fs28', 71)" class="i">b</span>) <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs21', 72)" onmouseover="showTip(event, 'fs21', 72)" class="i">purge</span> <span onmouseout="hideTip(event, 'fs27', 73)" onmouseover="showTip(event, 'fs27', 73)" class="i">a</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs21', 74)" onmouseover="showTip(event, 'fs21', 74)" class="i">purge</span> <span onmouseout="hideTip(event, 'fs28', 75)" onmouseover="showTip(event, 'fs28', 75)" class="i">b</span>

<span class="k">module</span> <span class="i">``OptionTrade case 2 usage``</span> <span class="o">=</span>
    <span class="k">open</span> <span class="i">``OptionTrade case 2``</span>

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs29', 76)" onmouseover="showTip(event, 'fs29', 76)" class="i">create</span> <span class="o">=</span> 
        <span onmouseout="hideTip(event, 'fs10', 77)" onmouseover="showTip(event, 'fs10', 77)" class="i">Combine</span>(
            <span onmouseout="hideTip(event, 'fs10', 78)" onmouseover="showTip(event, 'fs10', 78)" class="i">Combine</span>(
                <span onmouseout="hideTip(event, 'fs18', 79)" onmouseover="showTip(event, 'fs18', 79)" class="i">Operation</span>(<span onmouseout="hideTip(event, 'fs12', 80)" onmouseover="showTip(event, 'fs12', 80)" class="i">Buy</span>,<span class="s">&quot;</span><span class="s">MSFT</span><span class="s">&quot;</span>,<span class="n">100m</span>),
                <span onmouseout="hideTip(event, 'fs18', 81)" onmouseover="showTip(event, 'fs18', 81)" class="i">Operation</span>(<span onmouseout="hideTip(event, 'fs12', 82)" onmouseover="showTip(event, 'fs12', 82)" class="i">Buy</span>,<span class="s">&quot;</span><span class="s">NOK</span><span class="s">&quot;</span>,<span class="n">500m</span>)),
            <span onmouseout="hideTip(event, 'fs18', 83)" onmouseover="showTip(event, 'fs18', 83)" class="i">Operation</span>(<span onmouseout="hideTip(event, 'fs13', 84)" onmouseover="showTip(event, 'fs13', 84)" class="i">Sell</span>,<span class="s">&quot;</span><span class="s">GOOG</span><span class="s">&quot;</span>,<span class="n">300m</span>))

    <span class="k">let</span> <span class="k">rec</span> <span onmouseout="hideTip(event, 'fs30', 85)" onmouseover="showTip(event, 'fs30', 85)" class="i">purge</span> <span class="o">=</span> 
        <span class="k">function</span>
            | <span onmouseout="hideTip(event, 'fs18', 86)" onmouseover="showTip(event, 'fs18', 86)" class="i">Operation</span> (<span onmouseout="hideTip(event, 'fs31', 87)" onmouseover="showTip(event, 'fs31', 87)" class="i">kind</span>,<span onmouseout="hideTip(event, 'fs22', 88)" onmouseover="showTip(event, 'fs22', 88)" class="i">name</span>,<span onmouseout="hideTip(event, 'fs23', 89)" onmouseover="showTip(event, 'fs23', 89)" class="i">amount</span>) <span class="k">-&gt;</span> <span class="c">// you could use when or...</span>
                <span class="s">&quot;</span><span class="s">&quot;</span> <span class="c">// use common name and amount functionality and then </span>
                   <span class="c">// match kind with buy/sell when needed</span>
            | <span onmouseout="hideTip(event, 'fs19', 90)" onmouseover="showTip(event, 'fs19', 90)" class="i">Contract</span> (<span onmouseout="hideTip(event, 'fs32', 91)" onmouseover="showTip(event, 'fs32', 91)" class="i">dtk</span>, <span onmouseout="hideTip(event, 'fs24', 92)" onmouseover="showTip(event, 'fs24', 92)" class="i">dt</span>,<span onmouseout="hideTip(event, 'fs25', 93)" onmouseover="showTip(event, 'fs25', 93)" class="i">opt</span>) <span class="k">-&gt;</span> <span class="s">&quot;</span><span class="s">&quot;</span> <span class="c">// match dt with...purge(opt)</span>
            | <span onmouseout="hideTip(event, 'fs10', 94)" onmouseover="showTip(event, 'fs10', 94)" class="i">Combine</span> (<span onmouseout="hideTip(event, 'fs27', 95)" onmouseover="showTip(event, 'fs27', 95)" class="i">a</span>,<span onmouseout="hideTip(event, 'fs28', 96)" onmouseover="showTip(event, 'fs28', 96)" class="i">b</span>) <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs30', 97)" onmouseover="showTip(event, 'fs30', 97)" class="i">purge</span> <span onmouseout="hideTip(event, 'fs27', 98)" onmouseover="showTip(event, 'fs27', 98)" class="i">a</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs30', 99)" onmouseover="showTip(event, 'fs30', 99)" class="i">purge</span> <span onmouseout="hideTip(event, 'fs28', 100)" onmouseover="showTip(event, 'fs28', 100)" class="i">b</span></pre>
</td>
</tr>
</table>

<p>Usually the better solution is the model 2, if the parameters describe the same data content, like in here. Then the operation is easier to change from one form to other, e.g. Buy -> Sell. Rather make more types than few mega-types.</p>

<p>This is the easiest and most clean way to model, and this way you will get a clear data model. The downside is that operations are solid (/"hard-coded"), so you can't compose your own structures to do whatever, like a library: the functionality has to obey the data model functionality. Usually this is enough, when your goal is to build simple little system that has clear boundaries.</p>

<p>When C# code so often leads to object-mapping-code from type to another, comes <a href="http://msdn.microsoft.com/en-us/library/dd233237.aspx">F# Object Expressions</a> to rescue, you can create new instances without boilerplate-code:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs33', 101)" onmouseover="showTip(event, 'fs33', 101)" class="i">MyInvoice</span> <span class="o">=</span> { 
    <span onmouseout="hideTip(event, 'fs34', 102)" onmouseover="showTip(event, 'fs34', 102)" class="i">Sum</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs4', 103)" onmouseover="showTip(event, 'fs4', 103)" class="i">decimal</span>;
    <span onmouseout="hideTip(event, 'fs35', 104)" onmouseover="showTip(event, 'fs35', 104)" class="i">Tax</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs4', 105)" onmouseover="showTip(event, 'fs4', 105)" class="i">decimal</span>;
    <span class="c">//... </span>
    <span onmouseout="hideTip(event, 'fs36', 106)" onmouseover="showTip(event, 'fs36', 106)" class="i">Property01</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs3', 107)" onmouseover="showTip(event, 'fs3', 107)" class="i">string</span>;
    <span onmouseout="hideTip(event, 'fs37', 108)" onmouseover="showTip(event, 'fs37', 108)" class="i">Property02</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs3', 109)" onmouseover="showTip(event, 'fs3', 109)" class="i">string</span>;
    <span onmouseout="hideTip(event, 'fs38', 110)" onmouseover="showTip(event, 'fs38', 110)" class="i">Property03</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs3', 111)" onmouseover="showTip(event, 'fs3', 111)" class="i">string</span>;
    <span class="c">//...</span>
    <span onmouseout="hideTip(event, 'fs39', 112)" onmouseover="showTip(event, 'fs39', 112)" class="i">Property99</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs3', 113)" onmouseover="showTip(event, 'fs3', 113)" class="i">string</span>;
}
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs40', 114)" onmouseover="showTip(event, 'fs40', 114)" class="i">myInstance</span> <span class="o">=</span> { <span class="i">Sum</span><span class="o">=</span><span class="n">10m</span>; <span class="i">Tax</span><span class="o">=</span><span class="n">10m</span>; <span class="i">Property01</span><span class="o">=</span><span class="s">&quot;</span><span class="s">a</span><span class="s">&quot;</span>; <span class="i">Property02</span><span class="o">=</span><span class="s">&quot;</span><span class="s">b</span><span class="s">&quot;</span>; <span class="i">Property03</span><span class="o">=</span><span class="s">&quot;</span><span class="s">c</span><span class="s">&quot;</span>; <span class="i">Property99</span><span class="o">=</span><span class="s">&quot;</span><span class="s">zzz</span><span class="s">&quot;</span> }
<span class="c">// Don&#39;t have to define all copied propertis like in LINQ-select you would have to:</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs41', 115)" onmouseover="showTip(event, 'fs41', 115)" class="i">myNewCopy</span> <span class="o">=</span> { <span onmouseout="hideTip(event, 'fs40', 116)" onmouseover="showTip(event, 'fs40', 116)" class="i">myInstance</span> <span class="k">with</span> <span class="i">Property01</span><span class="o">=</span><span class="s">&quot;</span><span class="s">Hello</span><span class="s">!</span><span class="s">&quot;</span> }</pre>
</td>
</tr>
</table>

<h3>Modelling Contract as Computation</h3>

<p>For a normal program this is too heavy concept (if you aren't familiar with call-cc and Haskell-libraries), but one good option, if it is a must to try to construct some kind of custom work-flow/process/rule -engine or framework. The difference to the previous one is that the user can refer this as a library and make more custom composition-operations. In that case this can be thought as a combinator-library or a DSL-language.</p>

<p>The model may be modelled as an operation/function <code>('a -&gt; M&lt;'b&gt;)</code>, where "a" is "the program state", i.e. against what is the combination rules made, and M describes some kind of capsule/monad (for example a list), and "b" is the result type. The capsule is optional and also "a" and "b" don't have to be generics, if more precise business-oriented types are possible to define. At first, let's give a name to the function, just to avoid drowning into arrows:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs42', 117)" onmouseover="showTip(event, 'fs42', 117)" class="i">OptionTrade</span><span class="o">&lt;</span><span class="o">&#39;</span><span class="i">a</span>,<span class="o">&#39;</span><span class="i">b</span><span class="o">&gt;</span> <span class="o">=</span>
| <span onmouseout="hideTip(event, 'fs43', 118)" onmouseover="showTip(event, 'fs43', 118)" class="i">Operation</span> <span class="k">of</span> (<span class="o">&#39;</span><span class="i">a</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs44', 119)" onmouseover="showTip(event, 'fs44', 119)" class="i">List</span><span class="o">&lt;</span><span class="o">&#39;</span><span class="i">b</span><span class="o">&gt;</span>)</pre>
</td>
</tr>
</table>

<p>Now you may create a function that compose the functionality, e.g. with list:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs45', 120)" onmouseover="showTip(event, 'fs45', 120)" class="i">combine</span> (<span onmouseout="hideTip(event, 'fs43', 121)" onmouseover="showTip(event, 'fs43', 121)" class="i">Operation</span> <span onmouseout="hideTip(event, 'fs46', 122)" onmouseover="showTip(event, 'fs46', 122)" class="i">f1</span>) (<span onmouseout="hideTip(event, 'fs43', 123)" onmouseover="showTip(event, 'fs43', 123)" class="i">Operation</span> <span onmouseout="hideTip(event, 'fs47', 124)" onmouseover="showTip(event, 'fs47', 124)" class="i">f2</span>) <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs43', 125)" onmouseover="showTip(event, 'fs43', 125)" class="i">Operation</span>(<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs48', 126)" onmouseover="showTip(event, 'fs48', 126)" class="i">a</span> <span class="k">-&gt;</span> [<span onmouseout="hideTip(event, 'fs46', 127)" onmouseover="showTip(event, 'fs46', 127)" class="i">f1</span>(<span onmouseout="hideTip(event, 'fs48', 128)" onmouseover="showTip(event, 'fs48', 128)" class="i">a</span>); <span onmouseout="hideTip(event, 'fs47', 129)" onmouseover="showTip(event, 'fs47', 129)" class="i">f2</span>(<span onmouseout="hideTip(event, 'fs48', 130)" onmouseover="showTip(event, 'fs48', 130)" class="i">a</span>)])

<span class="c">// OptionTrade -&gt; OptionTrade -&gt; OptionTrade</span></pre>
</td>
</tr>
</table>

<p>and define yet another function, the execution itself:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs49', 131)" onmouseover="showTip(event, 'fs49', 131)" class="i">eval</span> (<span onmouseout="hideTip(event, 'fs43', 132)" onmouseover="showTip(event, 'fs43', 132)" class="i">Operation</span> <span onmouseout="hideTip(event, 'fs50', 133)" onmouseover="showTip(event, 'fs50', 133)" class="i">f</span>) <span onmouseout="hideTip(event, 'fs48', 134)" onmouseover="showTip(event, 'fs48', 134)" class="i">a</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs50', 135)" onmouseover="showTip(event, 'fs50', 135)" class="i">f</span>(<span onmouseout="hideTip(event, 'fs48', 136)" onmouseover="showTip(event, 'fs48', 136)" class="i">a</span>)</pre>
</td>
</tr>
</table>

<p>The user may now create whatever kind of Operation-style functions, that implement the syntax <code>(a -&gt; List&lt;b&gt;)</code> and these can be combined as the user likes.
For example:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs51', 137)" onmouseover="showTip(event, 'fs51', 137)" class="i">buy</span> <span onmouseout="hideTip(event, 'fs52', 138)" onmouseover="showTip(event, 'fs52', 138)" class="i">name</span> <span onmouseout="hideTip(event, 'fs53', 139)" onmouseover="showTip(event, 'fs53', 139)" class="i">amount</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs43', 140)" onmouseover="showTip(event, 'fs43', 140)" class="i">Operation</span>(<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs54', 141)" onmouseover="showTip(event, 'fs54', 141)" class="i">a</span> <span class="k">-&gt;</span> [(<span onmouseout="hideTip(event, 'fs52', 142)" onmouseover="showTip(event, 'fs52', 142)" class="i">name</span>, <span onmouseout="hideTip(event, 'fs53', 143)" onmouseover="showTip(event, 'fs53', 143)" class="i">amount</span>)])</pre>
</td>
</tr>
</table>

<p>Finally the user calls the execution of the program.</p>

<p>The code logic is not separately developed, but the library already executes the code logics. So the composition-functions in the source code form the abstract syntax tree:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs55', 144)" onmouseover="showTip(event, 'fs55', 144)" class="i">myCombination</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs45', 145)" onmouseover="showTip(event, 'fs45', 145)" class="i">combine</span>
        (<span onmouseout="hideTip(event, 'fs51', 146)" onmouseover="showTip(event, 'fs51', 146)" class="i">buy</span> <span class="s">&quot;</span><span class="s">MSFT</span><span class="s">&quot;</span> <span class="n">100m</span>)
        (<span onmouseout="hideTip(event, 'fs51', 147)" onmouseover="showTip(event, 'fs51', 147)" class="i">buy</span> <span class="s">&quot;</span><span class="s">NOK</span><span class="s">&quot;</span> <span class="n">500m</span>)
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs56', 148)" onmouseover="showTip(event, 'fs56', 148)" class="i">myDone</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs49', 149)" onmouseover="showTip(event, 'fs49', 149)" class="i">eval</span> <span onmouseout="hideTip(event, 'fs55', 150)" onmouseover="showTip(event, 'fs55', 150)" class="i">myCombination</span> <span class="s">&quot;</span><span class="s">now</span><span class="s">!</span><span class="s">&quot;</span></pre>
</td>
</tr>
</table>

<p>Here the code is overly generic. Sell-operation is left as an exercise.
Practical code sample (where is also the sell-operation and a pile of others) can be downloaded from the <a href="http://archive.msdn.microsoft.com/realworldfp/Release/ProjectReleases.aspx?ReleaseId=3674">internet</a>, code samples of the book <a href="http://www.manning.com/petricek/">"Real-World Functional Programming"</a>, chapter 15.</p>

<h4>Standard-operations</h4>

<p>When different functionalities are combined (even between different libraries), is is often handy to use the familiar standard-operations like:</p>

<ul>
<li>map <code>('T -&gt; 'R) -&gt; M&lt;'T&gt; -&gt; M&lt;'R&gt;</code></li>
<li>bind <code>('T -&gt; M&lt;'R&gt;) -&gt; M&lt;'T&gt; -&gt; M&lt;'R&gt;</code></li>
<li>return <code>'T -&gt; M&lt;'T&gt;</code></li>
</ul>

<p>For example, map would be like this (with one and two parameters):</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="c">//Map with one parameters, just basic composition:</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs57', 151)" onmouseover="showTip(event, 'fs57', 151)" class="i">map</span> <span onmouseout="hideTip(event, 'fs58', 152)" onmouseover="showTip(event, 'fs58', 152)" class="i">f</span> (<span onmouseout="hideTip(event, 'fs43', 153)" onmouseover="showTip(event, 'fs43', 153)" class="i">Operation</span> <span onmouseout="hideTip(event, 'fs59', 154)" onmouseover="showTip(event, 'fs59', 154)" class="i">f1</span>) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs43', 155)" onmouseover="showTip(event, 'fs43', 155)" class="i">Operation</span>(<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs54', 156)" onmouseover="showTip(event, 'fs54', 156)" class="i">a</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs58', 157)" onmouseover="showTip(event, 'fs58', 157)" class="i">f</span>(<span onmouseout="hideTip(event, 'fs59', 158)" onmouseover="showTip(event, 'fs59', 158)" class="i">f1</span>(<span onmouseout="hideTip(event, 'fs54', 159)" onmouseover="showTip(event, 'fs54', 159)" class="i">a</span>)))
<span class="c">//Map with f having two parameters:</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs60', 160)" onmouseover="showTip(event, 'fs60', 160)" class="i">map2</span> <span onmouseout="hideTip(event, 'fs61', 161)" onmouseover="showTip(event, 'fs61', 161)" class="i">f</span> (<span onmouseout="hideTip(event, 'fs43', 162)" onmouseover="showTip(event, 'fs43', 162)" class="i">Operation</span> <span onmouseout="hideTip(event, 'fs62', 163)" onmouseover="showTip(event, 'fs62', 163)" class="i">f1</span>) (<span onmouseout="hideTip(event, 'fs43', 164)" onmouseover="showTip(event, 'fs43', 164)" class="i">Operation</span> <span onmouseout="hideTip(event, 'fs63', 165)" onmouseover="showTip(event, 'fs63', 165)" class="i">f2</span>) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs43', 166)" onmouseover="showTip(event, 'fs43', 166)" class="i">Operation</span>(<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs64', 167)" onmouseover="showTip(event, 'fs64', 167)" class="i">a</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs61', 168)" onmouseover="showTip(event, 'fs61', 168)" class="i">f</span> (<span onmouseout="hideTip(event, 'fs62', 169)" onmouseover="showTip(event, 'fs62', 169)" class="i">f1</span> <span onmouseout="hideTip(event, 'fs64', 170)" onmouseover="showTip(event, 'fs64', 170)" class="i">a</span>) (<span onmouseout="hideTip(event, 'fs63', 171)" onmouseover="showTip(event, 'fs63', 171)" class="i">f2</span> <span onmouseout="hideTip(event, 'fs64', 172)" onmouseover="showTip(event, 'fs64', 172)" class="i">a</span>))</pre>
</td>
</tr>
</table>

<p>Avoid side-effects. Operation functionality can be figured out from the type syntax.</p>

<h2>3. Syntax</h2>

<p>F# has multiple features to make your functionality more convenient to use: Custom operators, Builder-syntax, Quotations (like C# -expression-tree), Query-syntax, ...
Let's take a look at the first two:</p>

<h3>Custom Operators</h3>

<p>You can make your own <a href="http://msdn.microsoft.com/en-us/library/dd233204.aspx">operators</a>, like a normal function, but writing the operator to parenthesis. When you use operator, the first parameter will come before the operator. For example this "funny trick":</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> (<span class="o">+</span>) <span onmouseout="hideTip(event, 'fs65', 173)" onmouseover="showTip(event, 'fs65', 173)" class="i">x</span> <span onmouseout="hideTip(event, 'fs66', 174)" onmouseover="showTip(event, 'fs66', 174)" class="i">y</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs65', 175)" onmouseover="showTip(event, 'fs65', 175)" class="i">x</span><span class="o">-</span><span onmouseout="hideTip(event, 'fs66', 176)" onmouseover="showTip(event, 'fs66', 176)" class="i">y</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs67', 177)" onmouseover="showTip(event, 'fs67', 177)" class="i">minusOne</span> <span class="o">=</span> <span class="n">5</span><span class="o">+</span><span class="n">6</span></pre>
</td>
</tr>
</table>

<p>...but this will have really nice and useful applications in custom DSL-languages, for example the previous combine-function (we don't need to list parameters due to partial application):</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> (<span class="o">&amp;</span>) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs45', 178)" onmouseover="showTip(event, 'fs45', 178)" class="i">combine</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs68', 179)" onmouseover="showTip(event, 'fs68', 179)" class="i">myCombination2</span> <span class="o">=</span> 
    <span onmouseout="hideTip(event, 'fs51', 180)" onmouseover="showTip(event, 'fs51', 180)" class="i">buy</span> <span class="s">&quot;</span><span class="s">MSFT</span><span class="s">&quot;</span> <span class="n">100m</span> <span class="o">&amp;</span>
    <span onmouseout="hideTip(event, 'fs51', 181)" onmouseover="showTip(event, 'fs51', 181)" class="i">buy</span> <span class="s">&quot;</span><span class="s">NOK</span><span class="s">&quot;</span> <span class="n">500m</span> <span class="o">&amp;</span>
    <span class="i">sell</span> <span class="s">&quot;</span><span class="s">GOOG</span><span class="s">&quot;</span> <span class="n">300m</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs69', 182)" onmouseover="showTip(event, 'fs69', 182)" class="i">myDone2</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs49', 183)" onmouseover="showTip(event, 'fs49', 183)" class="i">eval</span> <span onmouseout="hideTip(event, 'fs68', 184)" onmouseover="showTip(event, 'fs68', 184)" class="i">myCombination2</span> <span class="s">&quot;</span><span class="s">now</span><span class="s">!</span><span class="s">&quot;</span></pre>
</td>
</tr>
</table>

<p>Overloading operators can be done also as usual member-functions to types. In F# you can also do extension methods (and extension properties!):</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs7', 185)" onmouseover="showTip(event, 'fs7', 185)" class="i">System</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs70', 186)" onmouseover="showTip(event, 'fs70', 186)" class="i">String</span> <span class="k">with</span>
    <span class="k">member</span> <span onmouseout="hideTip(event, 'fs71', 187)" onmouseover="showTip(event, 'fs71', 187)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs72', 188)" onmouseover="showTip(event, 'fs72', 188)" class="i">yell</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs71', 189)" onmouseover="showTip(event, 'fs71', 189)" class="i">x</span> <span class="o">+</span> <span class="s">&quot;</span><span class="s">!</span><span class="s">&quot;</span>
<span class="c">// &quot;hello&quot;.yell</span></pre>
</td>
</tr>
</table>

<h3>Builder-syntax</h3>

<p>You may build your own computational expressions: You just have to pick your state/side-effect that you want to encapsulate. Inside this the programming is with syntax <code>myContext{ ... }</code> where "myContext" is almost any word.</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="c">// Return class like Async&lt;T&gt; or IEnumerable&lt;T&gt;:</span>
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs73', 190)" onmouseover="showTip(event, 'fs73', 190)" class="i">MyReturnClass</span>(<span onmouseout="hideTip(event, 'fs74', 191)" onmouseover="showTip(event, 'fs74', 191)" class="i">n</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs75', 192)" onmouseover="showTip(event, 'fs75', 192)" class="i">int</span>) <span class="o">=</span>
    <span class="k">member</span> <span onmouseout="hideTip(event, 'fs76', 193)" onmouseover="showTip(event, 'fs76', 193)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs77', 194)" onmouseover="showTip(event, 'fs77', 194)" class="i">Value</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs74', 195)" onmouseover="showTip(event, 'fs74', 195)" class="i">n</span>

<span class="k">type</span> <span onmouseout="hideTip(event, 'fs78', 196)" onmouseover="showTip(event, 'fs78', 196)" class="i">MyContextBuilder</span>() <span class="o">=</span>        
    <span class="k">member</span> <span onmouseout="hideTip(event, 'fs79', 197)" onmouseover="showTip(event, 'fs79', 197)" class="i">t</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs80', 198)" onmouseover="showTip(event, 'fs80', 198)" class="i">Return</span>(<span onmouseout="hideTip(event, 'fs65', 199)" onmouseover="showTip(event, 'fs65', 199)" class="i">x</span>) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs73', 200)" onmouseover="showTip(event, 'fs73', 200)" class="i">MyReturnClass</span>(<span onmouseout="hideTip(event, 'fs65', 201)" onmouseover="showTip(event, 'fs65', 201)" class="i">x</span>)
    <span class="k">member</span> <span onmouseout="hideTip(event, 'fs79', 202)" onmouseover="showTip(event, 'fs79', 202)" class="i">t</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs81', 203)" onmouseover="showTip(event, 'fs81', 203)" class="i">Bind</span>(<span onmouseout="hideTip(event, 'fs76', 204)" onmouseover="showTip(event, 'fs76', 204)" class="i">x</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs73', 205)" onmouseover="showTip(event, 'fs73', 205)" class="i">MyReturnClass</span>, <span onmouseout="hideTip(event, 'fs82', 206)" onmouseover="showTip(event, 'fs82', 206)" class="i">rest</span>) <span class="o">=</span> 
        <span onmouseout="hideTip(event, 'fs83', 207)" onmouseover="showTip(event, 'fs83', 207)" class="i">printfn</span> <span class="s">&quot;</span><span class="s">Binded</span><span class="s"> </span><span class="s">%</span><span class="s">d</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fs76', 208)" onmouseover="showTip(event, 'fs76', 208)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs84', 209)" onmouseover="showTip(event, 'fs84', 209)" class="i">Value</span> 
        <span onmouseout="hideTip(event, 'fs82', 210)" onmouseover="showTip(event, 'fs82', 210)" class="i">rest</span>(<span onmouseout="hideTip(event, 'fs76', 211)" onmouseover="showTip(event, 'fs76', 211)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs84', 212)" onmouseover="showTip(event, 'fs84', 212)" class="i">Value</span>)

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs85', 213)" onmouseover="showTip(event, 'fs85', 213)" class="i">context</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs78', 214)" onmouseover="showTip(event, 'fs78', 214)" class="i">MyContextBuilder</span>()

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs86', 215)" onmouseover="showTip(event, 'fs86', 215)" class="i">test</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs85', 216)" onmouseover="showTip(event, 'fs85', 216)" class="i">context</span>{
        <span class="k">let!</span> <span onmouseout="hideTip(event, 'fs87', 217)" onmouseover="showTip(event, 'fs87', 217)" class="i">a</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs73', 218)" onmouseover="showTip(event, 'fs73', 218)" class="i">MyReturnClass</span>(<span class="n">3</span>) <span class="c">//&quot;let!&quot; calls builder&#39;s Bind</span>
        <span class="k">let!</span> <span onmouseout="hideTip(event, 'fs88', 219)" onmouseover="showTip(event, 'fs88', 219)" class="i">b</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs73', 220)" onmouseover="showTip(event, 'fs73', 220)" class="i">MyReturnClass</span>(<span class="n">5</span>) <span class="c">//&quot;let!&quot; calls builder&#39;s Bind</span>

        <span class="c">//Inside the monad you program like usual F#:</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs89', 221)" onmouseover="showTip(event, 'fs89', 221)" class="i">mult</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs87', 222)" onmouseover="showTip(event, 'fs87', 222)" class="i">a</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs88', 223)" onmouseover="showTip(event, 'fs88', 223)" class="i">b</span>   
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs90', 224)" onmouseover="showTip(event, 'fs90', 224)" class="i">sum</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs89', 225)" onmouseover="showTip(event, 'fs89', 225)" class="i">mult</span> <span class="o">+</span> <span class="n">1</span> 

        <span class="k">return</span> <span onmouseout="hideTip(event, 'fs90', 226)" onmouseover="showTip(event, 'fs90', 226)" class="i">sum</span> <span class="c">//&quot;return&quot; calls builder&#39;s Return(x)</span>
    }</pre>
</td>
</tr>
</table>

<ul>
<li>Inside the context, the bang (exclamation mark) -commands are ("syntactic sugar") calls to the corresponding methods of the builder-"interface".</li>
<li>"Interface" doesn't have to be fully covered, just the methods you like. The system is based on continuation: call-cc and reify.</li>
<li>Detailed description of the interface and how it works is available:
<ul>
<li><a href="http://msdn.microsoft.com/en-us/library/dd233182.aspx">Interface</a></li>
<li><a href="http://blogs.msdn.com/b/dsyme/archive/2007/09/22/some-details-on-f-computation-expressions-aka-monadic-or-workflow-syntax.aspx">Additional information</a></li>
</ul></li>
</ul>

<p>This can be used to capsulate some state, e.g. in stock-trading it could be the current bank account balance available.</p>

<h2>Exercises</h2>

<h3>Exercise 1</h3>

<p>This is some kind of fictional loan-application-process: <a href="loanappprocess.pdf">pdf</a>.</p>

<p>Here is a quick &amp; dirty version of copy &amp; pasting the texts to data types:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs91', 227)" onmouseover="showTip(event, 'fs91', 227)" class="i">Terms</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs3', 228)" onmouseover="showTip(event, 'fs3', 228)" class="i">string</span>
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs92', 229)" onmouseover="showTip(event, 'fs92', 229)" class="i">Loan</span> <span class="o">=</span> 
| <span onmouseout="hideTip(event, 'fs93', 230)" onmouseover="showTip(event, 'fs93', 230)" class="i">Offer</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs4', 231)" onmouseover="showTip(event, 'fs4', 231)" class="i">decimal</span><span class="o">*</span><span class="i">DateTime</span>
| <span onmouseout="hideTip(event, 'fs94', 232)" onmouseover="showTip(event, 'fs94', 232)" class="i">Approved</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs4', 233)" onmouseover="showTip(event, 'fs4', 233)" class="i">decimal</span><span class="o">*</span><span class="i">DateTime</span>

<span class="k">type</span> <span class="i">``Loan application state``</span> <span class="o">=</span>
| <span class="i">``Status Received``</span>
| <span class="i">``Has Client``</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs95', 234)" onmouseover="showTip(event, 'fs95', 234)" class="i">bool</span>
| <span class="i">``Has Credit``</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs95', 235)" onmouseover="showTip(event, 'fs95', 235)" class="i">bool</span>
| <span class="i">``Offer terms are ok``</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs91', 236)" onmouseover="showTip(event, 'fs91', 236)" class="i">Terms</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs95', 237)" onmouseover="showTip(event, 'fs95', 237)" class="i">bool</span>
| <span class="i">``Loan rejected``</span>
| <span class="i">``Manual offer terms``</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs91', 238)" onmouseover="showTip(event, 'fs91', 238)" class="i">Terms</span>
| <span class="i">``Offer created``</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs91', 239)" onmouseover="showTip(event, 'fs91', 239)" class="i">Terms</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs92', 240)" onmouseover="showTip(event, 'fs92', 240)" class="i">Loan</span>
| <span class="i">``Offer approved``</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs91', 241)" onmouseover="showTip(event, 'fs91', 241)" class="i">Terms</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs92', 242)" onmouseover="showTip(event, 'fs92', 242)" class="i">Loan</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs95', 243)" onmouseover="showTip(event, 'fs95', 243)" class="i">bool</span>
| <span class="i">``Offer closed``</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs91', 244)" onmouseover="showTip(event, 'fs91', 244)" class="i">Terms</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs92', 245)" onmouseover="showTip(event, 'fs92', 245)" class="i">Loan</span>
| <span class="i">``Money transferred``</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs92', 246)" onmouseover="showTip(event, 'fs92', 246)" class="i">Loan</span>
| <span class="i">``Loan fully paid``</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs95', 247)" onmouseover="showTip(event, 'fs95', 247)" class="i">bool</span><span class="o">*</span><span onmouseout="hideTip(event, 'fs92', 248)" onmouseover="showTip(event, 'fs92', 248)" class="i">Loan</span>
| <span class="i">``Report created``</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs92', 249)" onmouseover="showTip(event, 'fs92', 249)" class="i">Loan</span></pre>
</td>
</tr>
</table>

<ul>
<li>How would you optimize these data types?</li>
<li>Write also a few fictional methods to use this process and transfer the loan application from a process state to another.</li>
<li>The data not involved to the process is better to encapsulate later as a new tuple beside than inside the process.</li>
</ul>

<h3>Exercise 2</h3>

<p>Think what would be a bad domain-model?</p>

<h3>Exercise 3</h3>

<p>The chapter "Modelling Contract as Computation" did left the sell-operation away. Sell could either be a negation or a new custom type of <code>type OperationKind = Buy | Sell</code>.</p>

<p>Because there is only one sell-operation and combine-function takes several parameters, there is a little need for code changes, e.g. wrapper-operation to the list and maybe a custom operator for the wrapper:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span class="i">``return``</span> (<span onmouseout="hideTip(event, 'fs43', 250)" onmouseover="showTip(event, 'fs43', 250)" class="i">Operation</span> <span onmouseout="hideTip(event, 'fs46', 251)" onmouseover="showTip(event, 'fs46', 251)" class="i">f1</span>) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs43', 252)" onmouseover="showTip(event, 'fs43', 252)" class="i">Operation</span>(<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs48', 253)" onmouseover="showTip(event, 'fs48', 253)" class="i">a</span> <span class="k">-&gt;</span> [<span onmouseout="hideTip(event, 'fs46', 254)" onmouseover="showTip(event, 'fs46', 254)" class="i">f1</span>(<span onmouseout="hideTip(event, 'fs48', 255)" onmouseover="showTip(event, 'fs48', 255)" class="i">a</span>)])</pre>
</td>
</tr>
</table>

<p>Implement the sell-operation and try to get it working in the original example.</p>

<p>This is how you can declare your own functions:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="c">//Example use, with list-parameter, one parameters:</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs96', 256)" onmouseover="showTip(event, 'fs96', 256)" class="i">doubleTradeAmount</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs57', 257)" onmouseover="showTip(event, 'fs57', 257)" class="i">map</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs97', 258)" onmouseover="showTip(event, 'fs97', 258)" class="i">al</span> <span class="k">-&gt;</span> [<span onmouseout="hideTip(event, 'fs98', 259)" onmouseover="showTip(event, 'fs98', 259)" class="i">fst</span>(<span onmouseout="hideTip(event, 'fs97', 260)" onmouseover="showTip(event, 'fs97', 260)" class="i">al</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs44', 261)" onmouseover="showTip(event, 'fs44', 261)" class="i">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs99', 262)" onmouseover="showTip(event, 'fs99', 262)" class="i">head</span>),<span onmouseout="hideTip(event, 'fs100', 263)" onmouseover="showTip(event, 'fs100', 263)" class="i">snd</span>(<span onmouseout="hideTip(event, 'fs97', 264)" onmouseover="showTip(event, 'fs97', 264)" class="i">al</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs44', 265)" onmouseover="showTip(event, 'fs44', 265)" class="i">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs99', 266)" onmouseover="showTip(event, 'fs99', 266)" class="i">head</span>)<span class="o">*</span><span class="n">2m</span>])
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs101', 267)" onmouseover="showTip(event, 'fs101', 267)" class="i">goneDouble</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs96', 268)" onmouseover="showTip(event, 'fs96', 268)" class="i">doubleTradeAmount</span> (<span onmouseout="hideTip(event, 'fs51', 269)" onmouseover="showTip(event, 'fs51', 269)" class="i">buy</span> <span class="s">&quot;</span><span class="s">MSFT</span><span class="s">&quot;</span> <span class="n">100m</span>)
<span onmouseout="hideTip(event, 'fs49', 270)" onmouseover="showTip(event, 'fs49', 270)" class="i">eval</span> <span onmouseout="hideTip(event, 'fs101', 271)" onmouseover="showTip(event, 'fs101', 271)" class="i">goneDouble</span> (<span class="s">&quot;</span><span class="s">not</span><span class="s">-</span><span class="s">used</span><span class="s">-</span><span class="s">initial</span><span class="s">-</span><span class="s">state</span><span class="s">&quot;</span>,<span class="n">0m</span>)</pre>
</td>
</tr>
</table>

<p>As you can see, the list-context is useless here and causes just extra List.head-calls. You can try to remove the list from the computations.</p>

<p>Create a custom function using map2-function.</p>

<h2>Links / Sources</h2>

<p>Tomas Petricek - Domain Specific Languages in F# - <a href="http://vimeo.com/60546839">Video</a>, <a href="http://www.slideshare.net/tomaspfb/dsls">Slides</a></p>

<p>Simon Peyton-Jones - <a href="http://research.microsoft.com/en-us/um/people/simonpj/papers/financial-contracts/contracts-icfp.htm">Composing contracts: an adventure in financial engineering</a></p>

<p>Lab49 - <a href="http://blog.lab49.com/archives/3011">The Algebra of Data, and the Calculus of Mutation</a></p>

<p>Philip Wadler - <a href="http://ttic.uchicago.edu/~dreyer/course/papers/wadler.pdf">Theorems for free!</a></p>

<p><a href="../ReadmeEng.html">Back to the menu</a></p>

          <div class="tip" id="fs1">type OptionTrade =<br />&#160;&#160;| Buy of string * decimal<br />&#160;&#160;| Sell of string * decimal<br />&#160;&#160;| ContractUntil of DateTime * OptionTrade<br />&#160;&#160;| ContractAfter of DateTime * OptionTrade<br />&#160;&#160;| Combine of OptionTrade * OptionTrade<br /><br />Full name: DomainModelEng.OptionTrade case 1.OptionTrade</div>
<div class="tip" id="fs2">union case OptionTrade.Buy: string * decimal -&gt; OptionTrade</div>
<div class="tip" id="fs3">Multiple items<br />val string : value:&#39;T -&gt; string<br /><br />Full name: Microsoft.FSharp.Core.Operators.string<br /><br />--------------------<br />type string = System.String<br /><br />Full name: Microsoft.FSharp.Core.string</div>
<div class="tip" id="fs4">Multiple items<br />val decimal : value:&#39;T -&gt; decimal (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.decimal<br /><br />--------------------<br />type decimal = System.Decimal<br /><br />Full name: Microsoft.FSharp.Core.decimal<br /><br />--------------------<br />type decimal&lt;&#39;Measure&gt; = decimal<br /><br />Full name: Microsoft.FSharp.Core.decimal&lt;_&gt;</div>
<div class="tip" id="fs5">union case OptionTrade.Sell: string * decimal -&gt; OptionTrade</div>
<div class="tip" id="fs6">union case OptionTrade.ContractUntil: System.DateTime * OptionTrade -&gt; OptionTrade</div>
<div class="tip" id="fs7">namespace System</div>
<div class="tip" id="fs8">Multiple items<br />type DateTime =<br />&#160;&#160;struct<br />&#160;&#160;&#160;&#160;new : ticks:int64 -&gt; DateTime + 10 overloads<br />&#160;&#160;&#160;&#160;member Add : value:TimeSpan -&gt; DateTime<br />&#160;&#160;&#160;&#160;member AddDays : value:float -&gt; DateTime<br />&#160;&#160;&#160;&#160;member AddHours : value:float -&gt; DateTime<br />&#160;&#160;&#160;&#160;member AddMilliseconds : value:float -&gt; DateTime<br />&#160;&#160;&#160;&#160;member AddMinutes : value:float -&gt; DateTime<br />&#160;&#160;&#160;&#160;member AddMonths : months:int -&gt; DateTime<br />&#160;&#160;&#160;&#160;member AddSeconds : value:float -&gt; DateTime<br />&#160;&#160;&#160;&#160;member AddTicks : value:int64 -&gt; DateTime<br />&#160;&#160;&#160;&#160;member AddYears : value:int -&gt; DateTime<br />&#160;&#160;&#160;&#160;...<br />&#160;&#160;end<br /><br />Full name: System.DateTime<br /><br />--------------------<br />System.DateTime()<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />System.DateTime(ticks: int64) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />System.DateTime(ticks: int64, kind: System.DateTimeKind) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />System.DateTime(year: int, month: int, day: int) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />System.DateTime(year: int, month: int, day: int, calendar: System.Globalization.Calendar) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />System.DateTime(year: int, month: int, day: int, hour: int, minute: int, second: int) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />System.DateTime(year: int, month: int, day: int, hour: int, minute: int, second: int, kind: System.DateTimeKind) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />System.DateTime(year: int, month: int, day: int, hour: int, minute: int, second: int, calendar: System.Globalization.Calendar) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />System.DateTime(year: int, month: int, day: int, hour: int, minute: int, second: int, millisecond: int) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />System.DateTime(year: int, month: int, day: int, hour: int, minute: int, second: int, millisecond: int, kind: System.DateTimeKind) : unit<br />&#160;&#160;&#160;<em>(+0 other overloads)</em></div>
<div class="tip" id="fs9">union case OptionTrade.ContractAfter: System.DateTime * OptionTrade -&gt; OptionTrade</div>
<div class="tip" id="fs10">union case OptionTrade.Combine: OptionTrade * OptionTrade -&gt; OptionTrade</div>
<div class="tip" id="fs11">type OperationKind =<br />&#160;&#160;| Buy<br />&#160;&#160;| Sell<br /><br />Full name: DomainModelEng.OptionTrade case 2.OperationKind</div>
<div class="tip" id="fs12">union case OperationKind.Buy: OperationKind</div>
<div class="tip" id="fs13">union case OperationKind.Sell: OperationKind</div>
<div class="tip" id="fs14">type DateTimeKind =<br />&#160;&#160;| Until<br />&#160;&#160;| After<br /><br />Full name: DomainModelEng.OptionTrade case 2.DateTimeKind</div>
<div class="tip" id="fs15">union case DateTimeKind.Until: DateTimeKind</div>
<div class="tip" id="fs16">union case DateTimeKind.After: DateTimeKind</div>
<div class="tip" id="fs17">type OptionTrade =<br />&#160;&#160;| Operation of OperationKind * string * decimal<br />&#160;&#160;| Contract of DateTimeKind * DateTime * OptionTrade<br />&#160;&#160;| Combine of OptionTrade * OptionTrade<br /><br />Full name: DomainModelEng.OptionTrade case 2.OptionTrade</div>
<div class="tip" id="fs18">union case OptionTrade.Operation: OperationKind * string * decimal -&gt; OptionTrade</div>
<div class="tip" id="fs19">union case OptionTrade.Contract: DateTimeKind * System.DateTime * OptionTrade -&gt; OptionTrade</div>
<div class="tip" id="fs20">val create : OptionTrade<br /><br />Full name: DomainModelEng.OptionTrade case 1 usage.create</div>
<div class="tip" id="fs21">val purge : _arg1:OptionTrade -&gt; string<br /><br />Full name: DomainModelEng.OptionTrade case 1 usage.purge</div>
<div class="tip" id="fs22">val name : string</div>
<div class="tip" id="fs23">val amount : decimal</div>
<div class="tip" id="fs24">val dt : System.DateTime</div>
<div class="tip" id="fs25">val opt : OptionTrade</div>
<div class="tip" id="fs26">property System.DateTime.Now: System.DateTime</div>
<div class="tip" id="fs27">val a : OptionTrade</div>
<div class="tip" id="fs28">val b : OptionTrade</div>
<div class="tip" id="fs29">val create : OptionTrade<br /><br />Full name: DomainModelEng.OptionTrade case 2 usage.create</div>
<div class="tip" id="fs30">val purge : _arg1:OptionTrade -&gt; string<br /><br />Full name: DomainModelEng.OptionTrade case 2 usage.purge</div>
<div class="tip" id="fs31">val kind : OperationKind</div>
<div class="tip" id="fs32">val dtk : DateTimeKind</div>
<div class="tip" id="fs33">type MyInvoice =<br />&#160;&#160;{Sum: decimal;<br />&#160;&#160;&#160;Tax: decimal;<br />&#160;&#160;&#160;Property01: string;<br />&#160;&#160;&#160;Property02: string;<br />&#160;&#160;&#160;Property03: string;<br />&#160;&#160;&#160;Property99: string;}<br /><br />Full name: DomainModelEng.MyInvoice</div>
<div class="tip" id="fs34">MyInvoice.Sum: decimal</div>
<div class="tip" id="fs35">MyInvoice.Tax: decimal</div>
<div class="tip" id="fs36">MyInvoice.Property01: string</div>
<div class="tip" id="fs37">MyInvoice.Property02: string</div>
<div class="tip" id="fs38">MyInvoice.Property03: string</div>
<div class="tip" id="fs39">MyInvoice.Property99: string</div>
<div class="tip" id="fs40">val myInstance : MyInvoice<br /><br />Full name: DomainModelEng.myInstance</div>
<div class="tip" id="fs41">val myNewCopy : MyInvoice<br /><br />Full name: DomainModelEng.myNewCopy</div>
<div class="tip" id="fs42">type OptionTrade&lt;&#39;a,&#39;b&gt; = | Operation of (&#39;a -&gt; List&lt;&#39;b&gt;)<br /><br />Full name: DomainModelEng.OptionTrade&lt;_,_&gt;</div>
<div class="tip" id="fs43">union case OptionTrade.Operation: (&#39;a -&gt; List&lt;&#39;b&gt;) -&gt; OptionTrade&lt;&#39;a,&#39;b&gt;</div>
<div class="tip" id="fs44">Multiple items<br />module List<br /><br />from Microsoft.FSharp.Collections<br /><br />--------------------<br />type List&lt;&#39;T&gt; =<br />&#160;&#160;| ( [] )<br />&#160;&#160;| ( :: ) of Head: &#39;T * Tail: &#39;T list<br />&#160;&#160;interface IEnumerable<br />&#160;&#160;interface IEnumerable&lt;&#39;T&gt;<br />&#160;&#160;member Head : &#39;T<br />&#160;&#160;member IsEmpty : bool<br />&#160;&#160;member Item : index:int -&gt; &#39;T with get<br />&#160;&#160;member Length : int<br />&#160;&#160;member Tail : &#39;T list<br />&#160;&#160;static member Cons : head:&#39;T * tail:&#39;T list -&gt; &#39;T list<br />&#160;&#160;static member Empty : &#39;T list<br /><br />Full name: Microsoft.FSharp.Collections.List&lt;_&gt;</div>
<div class="tip" id="fs45">val combine : OptionTrade&lt;&#39;a,&#39;b&gt; -&gt; OptionTrade&lt;&#39;a,&#39;b&gt; -&gt; OptionTrade&lt;&#39;a,List&lt;&#39;b&gt;&gt;<br /><br />Full name: DomainModelEng.combine</div>
<div class="tip" id="fs46">val f1 : (&#39;a -&gt; List&lt;&#39;b&gt;)</div>
<div class="tip" id="fs47">val f2 : (&#39;a -&gt; List&lt;&#39;b&gt;)</div>
<div class="tip" id="fs48">val a : &#39;a</div>
<div class="tip" id="fs49">val eval : OptionTrade&lt;&#39;a,&#39;b&gt; -&gt; a:&#39;a -&gt; List&lt;&#39;b&gt;<br /><br />Full name: DomainModelEng.eval</div>
<div class="tip" id="fs50">val f : (&#39;a -&gt; List&lt;&#39;b&gt;)</div>
<div class="tip" id="fs51">val buy : name:&#39;a -&gt; amount:&#39;b -&gt; OptionTrade&lt;&#39;c,(&#39;a * &#39;b)&gt;<br /><br />Full name: DomainModelEng.buy</div>
<div class="tip" id="fs52">val name : &#39;a</div>
<div class="tip" id="fs53">val amount : &#39;b</div>
<div class="tip" id="fs54">val a : &#39;c</div>
<div class="tip" id="fs55">val myCombination : OptionTrade&lt;string,List&lt;string * decimal&gt;&gt;<br /><br />Full name: DomainModelEng.myCombination</div>
<div class="tip" id="fs56">val myDone : List&lt;List&lt;string * decimal&gt;&gt;<br /><br />Full name: DomainModelEng.myDone</div>
<div class="tip" id="fs57">val map : f:(List&lt;&#39;a&gt; -&gt; List&lt;&#39;b&gt;) -&gt; OptionTrade&lt;&#39;c,&#39;a&gt; -&gt; OptionTrade&lt;&#39;c,&#39;b&gt;<br /><br />Full name: DomainModelEng.map</div>
<div class="tip" id="fs58">val f : (List&lt;&#39;a&gt; -&gt; List&lt;&#39;b&gt;)</div>
<div class="tip" id="fs59">val f1 : (&#39;c -&gt; List&lt;&#39;a&gt;)</div>
<div class="tip" id="fs60">val map2 : f:(List&lt;&#39;a&gt; -&gt; List&lt;&#39;b&gt; -&gt; List&lt;&#39;c&gt;) -&gt; OptionTrade&lt;&#39;d,&#39;a&gt; -&gt; OptionTrade&lt;&#39;d,&#39;b&gt; -&gt; OptionTrade&lt;&#39;d,&#39;c&gt;<br /><br />Full name: DomainModelEng.map2</div>
<div class="tip" id="fs61">val f : (List&lt;&#39;a&gt; -&gt; List&lt;&#39;b&gt; -&gt; List&lt;&#39;c&gt;)</div>
<div class="tip" id="fs62">val f1 : (&#39;d -&gt; List&lt;&#39;a&gt;)</div>
<div class="tip" id="fs63">val f2 : (&#39;d -&gt; List&lt;&#39;b&gt;)</div>
<div class="tip" id="fs64">val a : &#39;d</div>
<div class="tip" id="fs65">val x : int</div>
<div class="tip" id="fs66">val y : int</div>
<div class="tip" id="fs67">val minusOne : int<br /><br />Full name: DomainModelEng.minusOne</div>
<div class="tip" id="fs68">val myCombination2 : OptionTrade&lt;string,List&lt;List&lt;string * decimal&gt;&gt;&gt;<br /><br />Full name: DomainModelEng.myCombination2</div>
<div class="tip" id="fs69">val myDone2 : List&lt;List&lt;List&lt;string * decimal&gt;&gt;&gt;<br /><br />Full name: DomainModelEng.myDone2</div>
<div class="tip" id="fs70">Multiple items<br />type String =<br />&#160;&#160;new : value:char -&gt; string + 7 overloads<br />&#160;&#160;member Chars : int -&gt; char<br />&#160;&#160;member Clone : unit -&gt; obj<br />&#160;&#160;member CompareTo : value:obj -&gt; int + 1 overload<br />&#160;&#160;member Contains : value:string -&gt; bool<br />&#160;&#160;member CopyTo : sourceIndex:int * destination:char[] * destinationIndex:int * count:int -&gt; unit<br />&#160;&#160;member EndsWith : value:string -&gt; bool + 2 overloads<br />&#160;&#160;member Equals : obj:obj -&gt; bool + 2 overloads<br />&#160;&#160;member GetEnumerator : unit -&gt; CharEnumerator<br />&#160;&#160;member GetHashCode : unit -&gt; int<br />&#160;&#160;...<br /><br />Full name: System.String<br /><br />--------------------<br />System.String(value: nativeptr&lt;char&gt;) : unit<br />System.String(value: nativeptr&lt;sbyte&gt;) : unit<br />System.String(value: char []) : unit<br />System.String(c: char, count: int) : unit<br />System.String(value: nativeptr&lt;char&gt;, startIndex: int, length: int) : unit<br />System.String(value: nativeptr&lt;sbyte&gt;, startIndex: int, length: int) : unit<br />System.String(value: char [], startIndex: int, length: int) : unit<br />System.String(value: nativeptr&lt;sbyte&gt;, startIndex: int, length: int, enc: System.Text.Encoding) : unit</div>
<div class="tip" id="fs71">val x : System.String</div>
<div class="tip" id="fs72">member System.String.yell : int<br /><br />Full name: DomainModelEng.yell</div>
<div class="tip" id="fs73">Multiple items<br />type MyReturnClass =<br />&#160;&#160;new : n:int -&gt; MyReturnClass<br />&#160;&#160;member Value : int<br /><br />Full name: DomainModelEng.MyReturnClass<br /><br />--------------------<br />new : n:int -&gt; MyReturnClass</div>
<div class="tip" id="fs74">val n : int</div>
<div class="tip" id="fs75">Multiple items<br />val int : value:&#39;T -&gt; int (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.int<br /><br />--------------------<br />type int = int32<br /><br />Full name: Microsoft.FSharp.Core.int<br /><br />--------------------<br />type int&lt;&#39;Measure&gt; = int<br /><br />Full name: Microsoft.FSharp.Core.int&lt;_&gt;</div>
<div class="tip" id="fs76">val x : MyReturnClass</div>
<div class="tip" id="fs77">member MyReturnClass.Value : int<br /><br />Full name: DomainModelEng.MyReturnClass.Value</div>
<div class="tip" id="fs78">Multiple items<br />type MyContextBuilder =<br />&#160;&#160;new : unit -&gt; MyContextBuilder<br />&#160;&#160;member Bind : x:MyReturnClass * rest:(int -&gt; &#39;a) -&gt; &#39;a<br />&#160;&#160;member Return : x:int -&gt; MyReturnClass<br /><br />Full name: DomainModelEng.MyContextBuilder<br /><br />--------------------<br />new : unit -&gt; MyContextBuilder</div>
<div class="tip" id="fs79">val t : MyContextBuilder</div>
<div class="tip" id="fs80">member MyContextBuilder.Return : x:int -&gt; MyReturnClass<br /><br />Full name: DomainModelEng.MyContextBuilder.Return</div>
<div class="tip" id="fs81">member MyContextBuilder.Bind : x:MyReturnClass * rest:(int -&gt; &#39;a) -&gt; &#39;a<br /><br />Full name: DomainModelEng.MyContextBuilder.Bind</div>
<div class="tip" id="fs82">val rest : (int -&gt; &#39;a)</div>
<div class="tip" id="fs83">val printfn : format:Printf.TextWriterFormat&lt;&#39;T&gt; -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.printfn</div>
<div class="tip" id="fs84">property MyReturnClass.Value: int</div>
<div class="tip" id="fs85">val context : MyContextBuilder<br /><br />Full name: DomainModelEng.context</div>
<div class="tip" id="fs86">val test : MyReturnClass<br /><br />Full name: DomainModelEng.test</div>
<div class="tip" id="fs87">val a : int</div>
<div class="tip" id="fs88">val b : int</div>
<div class="tip" id="fs89">val mult : int</div>
<div class="tip" id="fs90">val sum : int</div>
<div class="tip" id="fs91">type Terms = string<br /><br />Full name: DomainModelEng.Terms</div>
<div class="tip" id="fs92">type Loan =<br />&#160;&#160;| Offer of decimal * obj<br />&#160;&#160;| Approved of decimal * obj<br /><br />Full name: DomainModelEng.Loan</div>
<div class="tip" id="fs93">union case Loan.Offer: decimal * obj -&gt; Loan</div>
<div class="tip" id="fs94">union case Loan.Approved: decimal * obj -&gt; Loan</div>
<div class="tip" id="fs95">type bool = System.Boolean<br /><br />Full name: Microsoft.FSharp.Core.bool</div>
<div class="tip" id="fs96">val doubleTradeAmount : (OptionTrade&lt;(string * decimal),(string * decimal)&gt; -&gt; OptionTrade&lt;(string * decimal),(string * decimal)&gt;)<br /><br />Full name: DomainModelEng.doubleTradeAmount</div>
<div class="tip" id="fs97">val al : List&lt;string * decimal&gt;</div>
<div class="tip" id="fs98">val fst : tuple:(&#39;T1 * &#39;T2) -&gt; &#39;T1<br /><br />Full name: Microsoft.FSharp.Core.Operators.fst</div>
<div class="tip" id="fs99">val head : list:&#39;T list -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Collections.List.head</div>
<div class="tip" id="fs100">val snd : tuple:(&#39;T1 * &#39;T2) -&gt; &#39;T2<br /><br />Full name: Microsoft.FSharp.Core.Operators.snd</div>
<div class="tip" id="fs101">val goneDouble : OptionTrade&lt;(string * decimal),(string * decimal)&gt;<br /><br />Full name: DomainModelEng.goneDouble</div>
          
        </div>
        <div class="span1"></div>
      </div>
    </div>
	<br/><div style="color:gray; text-align: center;"><img alt="Creative Commons -copyright" style="border-width:0" src="http://i.creativecommons.org/l/by/4.0/88x31.png" /> Tuomas Hietanen, 2014, thorium(at)iki.fi, <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" style="color:gray;">Creative Commons</a></div>
  </body>
</html>